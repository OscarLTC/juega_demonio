---
import Layout from "../../layouts/Layout.astro";
import RegistroLayout from "../../components/registro/RegistroLayout.astro";
import Select from "../../components/ui/Select.astro";
import Input from "../../components/ui/Input.astro";
import PhoneInput from "../../components/ui/PhoneInput.astro";
import DateInput from "../../components/ui/DateInput.astro";
import Button from "../../components/ui/Button.astro";
---

<Layout title="Datos Personales | Juega Demonio">
  <RegistroLayout
    currentStep={0}
    subtitle="Por favor, Completa tus datos"
  >
    <form id="datos-form" class="space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6">
        <Select
          label="Tipo de Documento"
          name="tipo-documento"
          options={[
            { value: "dni", label: "DNI" },
            { value: "ce", label: "Carnet de Extranjería" },
            { value: "pasaporte", label: "Pasaporte" }
          ]}
        />

        <Input
          label="Número de documento*"
          type="text"
          name="numero-documento"
          placeholder="Ingresa tu número"
          required
          maxlength={12}
        />

        <Input
          label="Nombres*"
          type="text"
          name="nombres"
          placeholder="Ingresa tus nombres"
          required
        />
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6">
        <Input
          label="Apellido Paterno*"
          type="text"
          name="apellido-paterno"
          placeholder="Ingresa Apellido Paterno"
          required
        />

        <Input
          label="Apellido Materno*"
          type="text"
          name="apellido-materno"
          placeholder="Ingresa Apellido Materno"
          required
        />

        <PhoneInput
          label="Número de Teléfono*"
          name="telefono"
          placeholder="Teléfono"
          required
        />
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
        <DateInput
          label="Fecha de nacimiento*"
          name="fecha-nacimiento"
          required
        />

        <Select
          label="País de residencia*"
          name="pais"
          options={[
            { value: "pe", label: "Perú" },
            { value: "co", label: "Colombia" },
            { value: "mx", label: "México" },
            { value: "ar", label: "Argentina" },
            { value: "cl", label: "Chile" },
            { value: "ec", label: "Ecuador" },
            { value: "other", label: "Otro" }
          ]}
        />
      </div>

      <div class="flex justify-end pt-4">
        <Button type="submit" label="CONTINUAR" />
      </div>
    </form>
  </RegistroLayout>
</Layout>

<script>
  function initDatosForm() {
    const form = document.getElementById("datos-form") as HTMLFormElement;

    form?.addEventListener("submit", (e) => {
      e.preventDefault();
      window.location.href = "/registro/seleccionar-plan";
    });
  }

  initDatosForm();
  document.addEventListener("astro:after-swap", initDatosForm);
</script>
